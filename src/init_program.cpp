#include <string.h>
#include "consts.h"
#include "init_program.h"
#include "sledge_program.h"

// MUST initialize this by calling init_init_program.
SledgeProgram sledge_init_program;

static byte ip_header[3] = {0x15, 0x00, 0x10};
static byte data[] = {
    0x02,0x40,0x40,0x40,0x42,0x60,0x00,0x00,
    0x01,0x40,0x00,0x40,0x00,0x00,0x00,0x00,
    0x00,0x40,0x40,0x40,0x42,0x60,0x01,0x00,
    0x01,0x40,0x00,0x40,0x00,0x00,0x00,0x00,
    0x00,0x34,0x40,0x40,0x42,0x60,0x02,0x00,
    0x01,0x40,0x00,0x40,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x00,
    0x00,0x14,0x00,0x00,0x00,0x7f,0x01,0x7f,
    0x01,0x7f,0x01,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x01,0x7f,0x40,
    0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x40,
    0x40,0x00,0x40,0x00,0x00,0x40,0x00,0x40,
    0x00,0x00,0x7f,0x40,0x00,0x00,0x00,0x00,
    0x00,0x00,0x40,0x40,0x40,0x00,0x40,0x00,
    0x40,0x40,0x00,0x40,0x00,0x00,0x03,0x00,
    0x00,0x7f,0x72,0x00,0x40,0x00,0x00,0x00,
    0x00,0x00,0x14,0x40,0x40,0x00,0x7f,0x7f,
    0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,
    0x00,0x10,0x35,0x40,0x64,0x00,0x40,0x64,
    0x00,0x64,0x6e,0x00,0x0f,0x40,0x7f,0x7f,
    0x00,0x32,0x40,0x00,0x00,0x00,0x00,0x40,
    0x00,0x40,0x40,0x00,0x00,0x28,0x40,0x00,
    0x00,0x00,0x00,0x40,0x00,0x40,0x40,0x00,
    0x00,0x1e,0x40,0x00,0x00,0x00,0x00,0x40,
    0x00,0x40,0x40,0x01,0x00,0x40,0x00,0x00,
    0x7f,0x32,0x00,0x00,0x7f,0x00,0x00,0x00,
    0x00,0x40,0x00,0x00,0x7f,0x34,0x7f,0x00,
    0x7f,0x00,0x00,0x00,0x00,0x40,0x00,0x00,
    0x40,0x40,0x40,0x40,0x40,0x40,0x00,0x00,
    0x00,0x40,0x00,0x00,0x40,0x40,0x40,0x40,
    0x40,0x40,0x00,0x00,0x01,0x10,0x0d,0x06,
    0x40,0x19,0x05,0x02,0x40,0x00,0x00,0x00,
    0x40,0x00,0x00,0x00,0x40,0x01,0x01,0x40,
    0x01,0x00,0x40,0x01,0x00,0x40,0x03,0x00,
    0x40,0x03,0x00,0x40,0x03,0x00,0x40,0x1a,
    0x00,0x40,0x1a,0x00,0x40,0x1a,0x00,0x40,
    0x00,0x00,0x40,0x00,0x00,0x40,0x00,0x00,
    0x40,0x00,0x00,0x40,0x00,0x00,0x40,0x00,
    0x00,0x40,0x00,0x00,0x40,0x10,0x64,0x00,
    0x00,0x0f,0x08,0x05,0x00,0x00,0x00,0x00,
    0x0c,0x00,0x00,0x0f,0x00,0x00,0x37
};
static byte data2[] = {0x00, 0x00, 0x00, 0x52};

void init_init_program() {
  init_program(&sledge_init_program);
}

void init_program(SledgeProgram *sp) {
  sp->sysex = SYSEX;
  sp->waldorf = WALDORF_MANUFACTURER_ID;
  memcpy(&sp->header, ip_header, sizeof(ip_header));
  sp->set_program_number(0);
  memcpy(&sp->data, data, sizeof(data));
  memset(&sp->sixteen_fours, 0x04, sizeof(sp->sixteen_fours));
  memset(&sp->seventeen_forty_fours, 0x44,
         sizeof(sp->seventeen_forty_fours));
  memset(&sp->three_zeroes, 0, sizeof(sp->three_zeroes));
  strncpy((char *)&sp->name, "Init            ", 16);
  sp->category = SLEDGE_CATEGORY_INIT;
  memcpy(&sp->data2, &data2, sizeof(data2));
  sp->eox = EOX;
}
